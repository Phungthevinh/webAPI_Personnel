using Microsoft.AspNetCore.Mvc;
using System.ClientModel;
using WebAPI.models;
using OpenAI;
using OpenAI.Chat;
using OpenAI.Files;

namespace WebAPI.Controllers
{
    public class chatAIController
    {
        private readonly ChatClient _chatClient;

        public chatAIController(ChatClient chatClient)
        {
            _chatClient = chatClient;
        }
        public async Task<IResult> chatvoiAIGPT([FromBody] chatAI message)
        {
            
            ChatCompletion completion = await _chatClient.CompleteChatAsync($"đây là bộ quy trinh \r\n BỘ QUY TRÌNH \r\n\r\nPhần I: Tuyển nhân sự\r\n1. Lập kế hoạch và Đăng tin tuyển dụng\r\n•\tNhận yêu cầu tuyển dụng: Tiếp nhận thông tin chi tiết về vị trí cần tuyển từ phòng ban.\r\n•\tXây dựng bài đăng tuyển dụng: Soạn thảo nội dung tin tuyển dụng rõ ràng, hấp dẫn và đầy đủ, bao gồm mô tả công việc, yêu cầu ứng viên và quyền lợi. Tin đăng này cần được duyệt trước khi đăng tải.\r\n2. Tiếp nhận và Sàng lọc hồ sơ ứng viên\r\n•\tTiếp nhận hồ sơ: Nhận hồ sơ xin việc, sơ yếu lý lịch đầy đủ, hồ sơ năng lực (nếu có) và các video giới thiệu (nếu ứng viên cung cấp).\r\n•\tSàng lọc và đánh giá ban đầu: Xem xét các hồ sơ để chọn ra những ứng viên tiềm năng phù hợp với yêu cầu của vị trí.\r\n•\tỨng viên phải nộp hồ sơ xin việc, sơ yếu lý lịch đầy đủ.\r\n3. Phỏng vấn và Đánh giá chuyên sâu\r\n•  Lên lịch phỏng vấn: Sắp xếp thời gian và địa điểm phỏng vấn phù hợp với các ứng viên đã được chọn.\r\n•  Tiến hành phỏng vấn và đánh giá: Thực hiện phỏng vấn chuyên sâu để đánh giá kiến thức, kỹ năng và mức độ phù hợp của ứng viên với vị trí và văn hóa công ty.\r\n•  Đưa ra quyết định: Dựa trên kết quả phỏng vấn, đánh giá ứng viên.\r\n•  Thông báo kết quả:\r\n•\tNếu ứng viên đạt, tiến hành gửi thư mời nhận việc hoặc thông báo chi tiết về ngày bắt đầu làm.\r\n•\tNếu ứng viên không đạt, gửi lời cảm ơn và thông báo kết quả phỏng vấn một cách lịch sự.\r\n4. Hỗ trợ hòa nhập \r\n•\tTiếp nhận và định hướng: Hỗ trợ nhân sự mới trong quá trình hòa nhập, giới thiệu về công ty, văn hóa và các quy định nội bộ.\r\n•\tHỗ trợ ban đầu: Cung cấp các thông tin cần thiết và giải đáp thắc mắc để nhân sự mới có thể bắt đầu công việc một cách thuận lợi.\r\n5. Đánh giá hiệu suất và Chăm sóc định kỳ\r\n•\tĐối với nhân viên văn phòng, thực hiện đánh giá sau 15 ngày: Thực hiện đánh giá hiệu suất của nhân sự mới sau 15 ngày làm việc, lặp lại 3 lần để đảm bảo họ thích nghi tốt.\r\n•\tĐối với nhân viên thị trường:\r\no\tGửi tin nhắn quan tâm vào sáng thứ Hai hàng tuần để duy trì kết nối.\r\no\tThực hiện một cuộc gọi mỗi tháng để nắm bắt tình hình và lắng nghe những khó khăn, đề xuất từ nhân sự.\r\nPhần II: Tuyển chọn đối tác Nhà phân phối và Đại lý\r\nĐể trở thành đối tác phân phối hoặc đại lý, cần chuẩn bị đầy đủ các hồ sơ sau:\r\n1. Hồ sơ bắt buộc:\r\n•\tGiấy phép kinh doanh hợp lệ.\r\n•\tCăn cước công dân (CCCD) của người đại diện.\r\n•\tThông tin địa chỉ.\r\n•\tĐối với Nhà phân phối: cần cung cấp thêm thông tin sau:\r\no\tMã số thuế doanh nghiệp.\r\n2. Quy trình ký kết và vận hành:\r\n•\tGiấy cam kết công nợ: Nếu có phát sinh đơn hàng đầu tiên, đối tác cần ký Giấy cam kết công nợ theo mẫu của công ty.\r\n•\tBáo cáo Xuất nhập tồn: Hàng tháng, Nhà phân phối phải thực hiện báo cáo tình hình xuất - nhập - tồn kho và gửi về công ty để xác nhận và ký duyệt.\r\nPhần III: Thanh lý hợp đồng\r\n1. Trình phê duyệt với Giám đốc kinh doanh\r\n•\tToàn bộ hồ sơ đề xuất sẽ được trình lên Giám đốc kinh doanh.\r\n•\tViệc thanh lý hợp đồng chỉ được thực hiện khi có sự đồng ý của Giám đốc kinh doanh.\r\n2. Thực hiện thanh lý hợp đồng\r\n•\tSau khi nhận được phê duyệt, bộ phận phụ trách sẽ liên hệ và làm việc trực tiếp với nhà phân phối.\r\n•\tHai bên sẽ cùng nhau thỏa thuận các điều khoản thanh lý.\r\n•\tTiến hành xử lý các vấn đề còn tồn đọng như chuyển đơn hàng, hàng khuyến mãi, loyal, xử lý công nợ và các cam kết khác.\r\n3. Hoàn tất và lưu trữ hồ sơ\r\n•\tSau khi hai bên đã thống nhất và hoàn thành mọi thủ tục, một Biên bản thanh lý hợp đồng chính thức sẽ được ký kết.\r\n•\tTất cả các tài liệu liên quan sẽ được lưu trữ để làm cơ sở đối chiếu trong tương lai.\r\nPhần IV: Xử Lý Đơn Hàng\r\nKhi có đơn hàng mới, quy trình xử lý sẽ được thực hiện như sau:\r\n•\tChuyển đơn hàng xuống kho: Ngay lập tức chuyển thông tin đơn hàng xuống bộ phận kho để chuẩn bị hàng.\r\n•\tXác nhận thanh toán: Xác định thời điểm khách hàng đã hoàn tất việc chuyển khoản thanh toán trong vòng 8 giờ.\r\n•\tTìm kiếm phương tiện vận chuyển: Bắt đầu tìm kiếm xe vận chuyển trong khoảng thời gian từ 36 đến 48 giờ.\r\n•\tPhí vận chuyển hàng không vượt quá 2%/giá trị đơn hàng.\r\n•\tTheo dõi và cập nhật trạng thái đơn hàng: Giám sát toàn bộ quá trình, bao gồm:\r\no\tThời gian đóng gói hoàn tất tại kho.\r\no\tThời gian hàng hóa được xếp lên xe.\r\no\tThời gian dự kiến hàng đến tay Nhà phân phối.\r\nPhần V: Đổi Trả Hàng Hóa\r\nKhi Nhà phân phối có nhu cầu đổi trả hàng, các bước cần tuân thủ là:\r\n•\tThống kê chi tiết hàng hóa: Nhân viên bán hàng phải lập bảng thống kê chi tiết về số lượng, hạn sử dụng (date) và hóa đơn nhập hàng.\r\n•\tXin phê duyệt: Bắt buộc phải có sự đồng ý của Giám đốc kinh doanh trước khi thực hiện việc gửi trả hàng về.\r\n•\tChi phí vận chuyển: Mọi chi phí cước gửi hàng trả về sẽ do Nhà phân phối chi trả.\r\nPhần VI: Đội ngũ Sale, Giám sát bán hàng, ASM\r\n1. Hoạt động hàng ngày\r\n•\tNhân viên Sale: Cần check-in đầy đủ 16 khách hàng mỗi ngày.\r\n•\tGiám sát bán hàng (GSBH):\r\no\tLàm việc theo đúng kế hoạch đã được duyệt.\r\no\tThực hiện check-in hàng ngày trên hệ thống DMS.\r\no\tĐảm bảo 100% khách hàng/tuyến.\r\n\r\n\r\n2. Quy định về Kế hoạch làm việc\r\n•\tKế hoạch tháng:\r\no\tGSBH và ASM (Giám đốc bán hàng khu vực) có trách nhiệm nộp kế hoạch làm việc tháng về công ty trước ngày 25 hàng tháng.\r\no\tGiám đốc kinh doanh sẽ phê duyệt các kế hoạch này trước ngày 27 cùng tháng.\r\n•\tThay đổi kế hoạch:\r\no\tMọi sự thay đổi so với kế hoạch đã được duyệt cần được báo cáo cụ thể và chi tiết cho Ban Giám đốc và bộ phận Admin.\r\n3. Quy định về Công tác phí và Vi phạm\r\n•\tCông tác phí:\r\no\tASM chỉ được thanh toán công tác phí khi di chuyển theo đúng kế hoạch làm việc đã được phê duyệt.\r\n•\tVi phạm quy định:\r\no\tNếu nhân viên không hoạt động theo đúng kế hoạch đã đăng ký, hành động này sẽ được xem là nghỉ việc không có phép.\r\nPhần VII: Lương\r\n•  Nộp bảng lương: Admin phải nộp bảng lương trước ngày 4 hàng tháng. Từ ngày 4 đến ngày 7, Admin cần liên tục nhắc Giám đốc Kinh doanh duyệt bảng lương để đảm bảo đúng tiến độ.\r\n•  Điều kiện chi trả: Lương chỉ được chi trả khi các Nhà phân phối gửi bảng Xuất Nhập Tồn về công ty.\r\n•  Giao chỉ tiêu bán hàng: Chỉ tiêu bán hàng phải được Giám đốc Kinh doanh giao vào ngày 2 hàng tháng. Nếu đến ngày 3 vẫn chưa nhận được chỉ tiêu mới, Admin sẽ sử dụng chỉ tiêu của tháng cũ để tính toán.\r\nPhần VIII: Xuất tiền, tạm ứng\r\n•  Phê duyệt: Mọi yêu cầu xuất tiền hoặc tạm ứng đều phải có chữ ký của Trưởng bộ phận liên quan.\r\n•  Mục đích sử dụng: Khoản tạm ứng phải được sử dụng đúng mục tiêu đã đề ra.\r\n•  Hoàn ứng: Sau khi công việc hoàn tất, người tạm ứng phải hoàn thiện hồ sơ và thủ tục trong vòng 48 giờ để quyết toán.\r\nPhần IX: Chương trình khuyến mãi, loyal\r\n•  Lên kế hoạch: Trước ngày 3 hàng tháng, cần hoàn tất việc lên kế hoạch cho chương trình khuyến mãi.\r\n•  Chuẩn bị: Mọi hoạt động chuẩn bị (ký duyệt, nhập DMS...) phải được hoàn thành trước ngày 3.\r\n•  Khởi động: Chương trình khuyến mãi sẽ chính thức bắt đầu vào sáng ngày 4 hàng tháng.\r\n                                                                                                   \r\n                                                                                                 Giám đốc kinh doanh\r\n\r\n                                                                                                \r\n                                                                                                     Nguyễn Xuân Du\r\n hãy trả lời các câu hỏi của người dùng và dựa vào bộ tài liệu đó để trả lời, nếu không tìm thấy trong tài liệu, sẽ đưa ra câu trả lời thông tin này tôi không nắm rõ!, bất cứ ý tưởng gì khác cũng sẽ chỉ nằm trong khuôn khổ tài liệu, đây là dữ liệu đầu vào{message.Input}");
            return Results.Ok(new { response = completion.Content[0].Text });
        }
    }
}
